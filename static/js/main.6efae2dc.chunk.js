(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{1:function(t,e,r){t.exports={contentWrapper:"App_contentWrapper__NRBO2",popupWrapper:"App_popupWrapper__1KNUp",popupCloseButton:"App_popupCloseButton__1A8qc",popup:"App_popup__fnS2L",popupTitle:"App_popupTitle__1dzie",popupButton:"App_popupButton__C8dyt",header:"App_header__2O_sm",title:"App_title__1Hxva",titleBig:"App_titleBig__3f4R2",titleSmall:"App_titleSmall__1RXSO",restartButton:"App_restartButton__rbdMu",scores:"App_scores__2QYLi",best:"App_best__32ga7",gridWrapper:"App_gridWrapper__16nn9",cell:"App_cell__Kvnv2",number:"App_number__VIpar",rules:"App_rules__27hDS",showArrowsButton:"App_showArrowsButton__2JG6a",controlsWrapper:"App_controlsWrapper__3RCl-",controlButtonWrapper:"App_controlButtonWrapper__3SVrZ",controlButton:"App_controlButton__1YJ25"}},17:function(t,e,r){"use strict";r.r(e);var n=r(0),c=r(2),o=r.n(c),a=r(9),s=r.n(a),u=r(4),p=r(19),i=r(1),l=r.n(i),b=function(t,e){var r=Object(c.useState)(function(t,e){var r=localStorage.getItem(t);return r?JSON.parse(r):e}(t,e)),n=Object(u.a)(r,2),o=n[0],a=n[1];return[o,function(e){localStorage.setItem(t,JSON.stringify(e)),a(e)}]},j=r(3),O=r(5),f=r.n(O),d={ArrowUp:"up",ArrowDown:"down",ArrowLeft:"left",ArrowRight:"right"},h=function(t,e){for(var r=Math.floor(t),n=[],c=0;c<r;c++)n.push(e);return n},_=function(t){for(var e=Object(j.a)(t),r=[],n=0;n<e.length;n++)0===e[n]&&r.push(n);return e[r[f.a.random(0,r.length-1)]]=f.a.random(10,!0)>9?4:2,e},m=function(){var t=h(16,0);return t=_(t),_(t)},v=function(t,e){var r=[];if("left"===e||"right"===e)for(var n=0;n<4;n++)r.push(t.slice(4*n,4*n+4));if("up"===e||"down"===e)for(var c=0;c<4;c++){for(var o=[],a=0;a<4;a++)o.push(t[c+4*a]);r.push(o)}return r},A=function(t){for(var e=Object(j.a)(t),r=3;r>0;r--)for(var n=r-1;n>=0;n--)if(e[r]&&e[n]){if(e[r]!==e[n])break;e[r]*=2,e[n]=0;break}return e},N=function(t,e){if(!Object.keys(d).includes(e))return Object(j.a)(t);var r=d["".concat(e)],n=Object(j.a)(t),c=function(t,e){var r=[];return v(t,e).forEach((function(t,n){switch(e){case"right":r.push.apply(r,Object(j.a)(A(t)));break;case"left":t.reverse(),r.push.apply(r,Object(j.a)(A(t).reverse()));break;case"up":t.reverse(),t=A(t).reverse();for(var c=0;c<4;c++)r[4*c+n]=t[c];break;case"down":t=A(t);for(var o=0;o<4;o++)r[4*o+n]=t[o]}})),r}(t,r);return c=function(t,e){var r=[];return v(t,e).forEach((function(t,n){var c=t.filter((function(t){return t})),o=4-c.length,a=h(o,0),s=[];if("right"===e)s=[].concat(Object(j.a)(a),Object(j.a)(c)),r.push.apply(r,Object(j.a)(s));else if("left"===e)s=[].concat(Object(j.a)(c),Object(j.a)(a)),r.push.apply(r,Object(j.a)(s));else if("up"===e){s=[].concat(Object(j.a)(c),Object(j.a)(a));for(var u=0;u<4;u++)r[4*u+n]=s[u]}else{s=[].concat(Object(j.a)(a),Object(j.a)(c));for(var p=0;p<4;p++)r[4*p+n]=s[p]}})),r}(c,r),f.a.isEqual(n,c)||(c=_(c)),c},g=function(t){return t.reduce((function(t,e){return t+e}),0)},w=function(t){var e="5rem";return t>99999?e="1.4rem":t>9999?e="1.6rem":t>999?e="2rem":t>99?e="3rem":t>9&&(e="3.8rem"),e},x=function(t){var e=220+.5*t,r=220-.01*t;return"rgb(".concat(255-.2*t,", ").concat(e,", ").concat(r,")")},B=function(){var t=Object(c.useState)(""),e=Object(u.a)(t,2),r=e[0],o=e[1],a=Object(c.useState)(!1),s=Object(u.a)(a,2),i=s[0],j=s[1],O=Object(c.useState)(!1),d=Object(u.a)(O,2),h=d[0],_=d[1],v=Object(c.useState)(!1),A=Object(u.a)(v,2),B=A[0],S=A[1],y=b("bestResult2048game",0),C=Object(u.a)(y,2),E=C[0],k=C[1],W=Object(c.useRef)(m()),R=Object(c.useRef)(g(W.current)),T=Object(c.useRef)(!1),L=Object(c.useRef)(0),I=Object(c.useRef)(0),U=Object(c.useCallback)((function(t){o(t.key)}),[]),D=function(){document.body.addEventListener("keydown",U)},Y=function(){document.body.removeEventListener("keydown",U)};Object(c.useEffect)((function(){return D(),function(){Y()}}),[]),Object(c.useEffect)((function(){r&&(W.current=N(W.current,r),R.current=g(W.current),function(t){var e=f.a.isEqual(t,N(t,"ArrowRight")),r=f.a.isEqual(t,N(t,"ArrowLeft")),n=f.a.isEqual(t,N(t,"ArrowUp")),c=f.a.isEqual(t,N(t,"ArrowDown"));return!!(n&&c&&r&&e)}(W.current)&&j(!0),W.current.includes(2048)&&!T.current&&(_(!0),T.current=!0,Y()),R.current>E&&k(R.current),o(""))}),[r]);return Object(n.jsxs)("div",{className:l.a.contentWrapper,children:[Object(n.jsxs)("div",{className:l.a.header,children:[Object(n.jsxs)("div",{className:l.a.title,children:[Object(n.jsx)("span",{className:l.a.titleBig,children:"2048 "}),Object(n.jsx)("span",{className:l.a.titleSmall,children:"THE GAME"})]}),Object(n.jsx)("button",{type:"button",className:l.a.restartButton,onClick:function(){W.current=m(),o("restart"),T.current=!1},children:"RESTART"}),Object(n.jsxs)("div",{className:l.a.scores,children:[Object(n.jsxs)("div",{className:l.a.best,children:["BEST: ",E]}),Object(n.jsxs)("div",{className:l.a.currentScore,children:["SCORE: ",R.current]})]})]}),i&&Object(n.jsxs)("div",{className:l.a.popupWrapper,children:[Object(n.jsx)("button",{type:"button",className:l.a.popupCloseButton,onClick:function(){return j(!i)},children:"CLOSE"}),Object(n.jsxs)("div",{className:l.a.popup,children:[Object(n.jsx)("span",{className:l.a.popupTitle,children:"GAME OVER"}),Object(n.jsx)("button",{type:"button",className:l.a.popupButton,onClick:function(){W.current=m(),o("restart"),j(!i),T.current=!1},children:"PLAY AGAIN"})]})]}),h&&Object(n.jsxs)("div",{className:l.a.popupWrapper,children:[Object(n.jsx)("button",{type:"button",className:l.a.popupCloseButton,onClick:function(){_(!h),D()},children:"CLOSE"}),Object(n.jsxs)("div",{className:l.a.popup,children:[Object(n.jsx)("span",{className:l.a.popupTitle,children:"YOU WON"}),Object(n.jsx)("button",{className:l.a.popupButton,type:"button",onClick:function(){_(!h),D()},children:"CONTINUE PLAYING"})]})]}),Object(n.jsx)("div",{className:l.a.gridWrapper,onTouchStart:function(t){L.current=t.touches[0].clientX,I.current=t.touches[0].clientY},onTouchEnd:function(t){var e=t.changedTouches[0].clientX-L.current,r=t.changedTouches[0].clientY-I.current;Math.abs(e)>=Math.abs(r)?o(e>0?"ArrowRight":"ArrowLeft"):o(r>0?"ArrowDown":"ArrowUp")},children:W.current.map((function(t){return Object(n.jsx)("div",{className:l.a.cell,style:{backgroundColor:x(t),color:0===t?"transparent":" rgb(60, 60, 60)",fontSize:w(t)},children:Object(n.jsx)("div",{className:l.a.number,children:t})},Object(p.a)())}))}),B&&Object(n.jsxs)("div",{className:l.a.controlsWrapper,children:[Object(n.jsx)("div",{className:l.a.controlButtonWrapper,children:Object(n.jsx)("button",{type:"button",className:l.a.controlButton,onClick:function(){return o("ArrowUp")},children:"UP"})}),Object(n.jsxs)("div",{className:l.a.controlButtonWrapper,children:[Object(n.jsx)("button",{type:"button",className:l.a.controlButton,onClick:function(){return o("ArrowLeft")},children:"LEFT"}),Object(n.jsx)("button",{type:"button",className:l.a.controlButton,onClick:function(){return o("ArrowRight")},children:"RIGHT"})]}),Object(n.jsx)("div",{className:l.a.controlButtonWrapper,children:Object(n.jsx)("button",{type:"button",className:l.a.controlButton,onClick:function(){return o("ArrowDown")},children:"DOWN"})})]}),Object(n.jsxs)("div",{className:l.a.rules,children:["HOW TO PLAY: Use your arrow keys (or controls on screen) to move the tiles. Tiles with the same number merge into one when they touch. Add them up to reach 2048!",Object(n.jsx)("button",{type:"button",className:l.a.showArrowsButton,onClick:function(){S(!B),B?D():Y()},children:B?"HIDE CONTROLS":"SHOW CONTROLS"})]})]})},S=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,20)).then((function(e){var r=e.getCLS,n=e.getFID,c=e.getFCP,o=e.getLCP,a=e.getTTFB;r(t),n(t),c(t),o(t),a(t)}))};s.a.render(Object(n.jsx)(o.a.StrictMode,{children:Object(n.jsx)(B,{})}),document.getElementById("root")),S()}},[[17,1,2]]]);
//# sourceMappingURL=main.6efae2dc.chunk.js.map